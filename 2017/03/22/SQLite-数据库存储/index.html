<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/logo.jpg?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/logo.jpg?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.jpg?v=5.1.4" color="#222">





  <meta name="keywords" content="SQLite,">










<meta name="description" content="SQLite是一款轻量级的关系型数据库，运算速度快，占用资源少，通常只需几百KB的内存就够了。SQLite不仅支持标准的SQL语法，还遵循数据库的ACID事务。">
<meta name="keywords" content="SQLite">
<meta property="og:type" content="article">
<meta property="og:title" content="SQLite 数据库存储">
<meta property="og:url" content="http://yoursite.com/2017/03/22/SQLite-数据库存储/index.html">
<meta property="og:site_name" content="Zeng&#39;s Blog">
<meta property="og:description" content="SQLite是一款轻量级的关系型数据库，运算速度快，占用资源少，通常只需几百KB的内存就够了。SQLite不仅支持标准的SQL语法，还遵循数据库的ACID事务。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-11-09T07:31:21.314Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SQLite 数据库存储">
<meta name="twitter:description" content="SQLite是一款轻量级的关系型数据库，运算速度快，占用资源少，通常只需几百KB的内存就够了。SQLite不仅支持标准的SQL语法，还遵循数据库的ACID事务。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2017/03/22/SQLite-数据库存储/">





  <title>SQLite 数据库存储 | Zeng's Blog</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Zeng's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">心之所向，素履以往</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/22/SQLite-数据库存储/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zeng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zeng's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">SQLite 数据库存储</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-22T16:19:31+08:00">
                2017-03-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>SQLite是一款轻量级的关系型数据库，运算速度快，占用资源少，通常只需几百KB的内存就够了。SQLite不仅支持标准的SQL语法，还遵循数据库的ACID事务。</p>
<a id="more"></a>
<h4 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h4><p>Android为了让使用者更加方便地管理数据库，提供了一个SQLiteOpenHelper帮助类。使用的时候只需要继承这个类就可以了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"> public class MyDatabaseHelper extends SQLiteOpenHelper &#123;</span><br><span class="line">    public static final String CREATE_BOOK=&quot;create table Book(&quot;</span><br><span class="line">            +&quot;id integer primary key autoincrement,&quot;</span><br><span class="line">            +&quot;author text,&quot;</span><br><span class="line">            +&quot;price real,&quot;</span><br><span class="line">            +&quot;pages integer,&quot;</span><br><span class="line">            +&quot;name text)&quot;;</span><br><span class="line">    public static final String CREATE_CATEGORY=&quot;create table Category(&quot;</span><br><span class="line">            +&quot;id integer primary key autoincrement,&quot;</span><br><span class="line">            +&quot;category_name text,&quot;</span><br><span class="line">            +&quot;category_code integer)&quot;;</span><br><span class="line">    private Context mContext;</span><br><span class="line">    public MyDatabaseHelper(Context context, String name, SQLiteDatabase.CursorFactory factory, int version) &#123;</span><br><span class="line">        super(context, name, factory, version);</span><br><span class="line">        mContext=context;</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public void onCreate(SQLiteDatabase db) &#123;</span><br><span class="line">        db.execSQL(CREATE_BOOK);</span><br><span class="line">        db.execSQL(CREATE_CATEGORY);</span><br><span class="line">        Toast.makeText(mContext,&quot;Create succeed&quot;,Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>重写SQLiteOpenHelper中参数少的构造方法。这个构造方法中接受4个参数，第一个是Context。第二个参数是数据库名，创建数据库时使用的就是这里制定的名称。第三个参数允许我们在查询数据时返回一个自定义的Cusor，一般传入null。第四个参数表示当前数据库的版本号，可以对数据库进行升级操作。</p>
<p>构建出SQLiteOpenHelper的实例后，再调用它的getReadableDatabase()方法或getWritableDatabase()方法就能创建数据库了，数据库文件存在<code>/data/data/&lt;package name&gt;/databases/</code>目录下。此时，重写的onCreate()方法也会得到执行，所以可以在这里去处理一些创建表的逻辑。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">public class MainActivity extends AppCompatActivity implements View.OnClickListener &#123;</span><br><span class="line">    private Button createDatabase;</span><br><span class="line">    private Button addData;</span><br><span class="line">    private Button updateData;</span><br><span class="line">    private Button deleteData;</span><br><span class="line">    private Button queryData;</span><br><span class="line">    private MyDatabaseHelper dbHelper;</span><br><span class="line">    public SQLiteDatabase db;</span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        dbHelper=new MyDatabaseHelper(this,&quot;BookStore.db&quot;,null,1);</span><br><span class="line">        db=dbHelper.getWritableDatabase();</span><br><span class="line">        createDatabase= (Button) findViewById(R.id.create_database);</span><br><span class="line">        addData=(Button)findViewById(R.id.add_data);</span><br><span class="line">        updateData=(Button)findViewById(R.id.update_data);</span><br><span class="line">        deleteData=(Button)findViewById(R.id.delete_data);</span><br><span class="line">        queryData=(Button)findViewById(R.id.query_data);</span><br><span class="line">        createDatabase.setOnClickListener(this);</span><br><span class="line">        addData.setOnClickListener(this);</span><br><span class="line">        updateData.setOnClickListener(this);</span><br><span class="line">        deleteData.setOnClickListener(this);</span><br><span class="line">        queryData.setOnClickListener(this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(View v) &#123;</span><br><span class="line">        switch (v.getId())&#123;</span><br><span class="line">            case R.id.create_database:</span><br><span class="line">                dbHelper.getWritableDatabase();</span><br><span class="line">                break;</span><br><span class="line">            case R.id.add_data:</span><br><span class="line">                ContentValues values=new ContentValues();</span><br><span class="line">//                开始组装第1条数据</span><br><span class="line">                values.put(&quot;name&quot;,&quot;The Da Vince Code&quot;);</span><br><span class="line">                values.put(&quot;author&quot;,&quot;Dan Brown&quot;);</span><br><span class="line">                values.put(&quot;pages&quot;,454);</span><br><span class="line">                values.put(&quot;price&quot;,16.96);</span><br><span class="line">                db.insert(&quot;Book&quot;,null,values);</span><br><span class="line">                values.clear();</span><br><span class="line">//                开始组装第2条数据</span><br><span class="line">                values.put(&quot;name&quot;,&quot;The Lost Symbol&quot;);</span><br><span class="line">                values.put(&quot;author&quot;,&quot;Dan Brown&quot;);</span><br><span class="line">                values.put(&quot;pages&quot;,510);</span><br><span class="line">                values.put(&quot;price&quot;,19.95);</span><br><span class="line">                db.insert(&quot;Book&quot;,null,values);</span><br><span class="line">                break;</span><br><span class="line">            case R.id.update_data:</span><br><span class="line">                ContentValues values1=new ContentValues();</span><br><span class="line">                values1.put(&quot;price&quot;,16);</span><br><span class="line">                db.update(&quot;Book&quot;,values1,&quot;name=?&quot;,new String[]&#123;&quot;The Da Vince Code&quot;&#125;);</span><br><span class="line">                break;</span><br><span class="line">            case R.id.delete_data:</span><br><span class="line">                db.delete(&quot;Book&quot;,&quot;pages&gt;?&quot;,new String[]&#123;&quot;500&quot;&#125;);</span><br><span class="line">                break;</span><br><span class="line">            case R.id.query_data:</span><br><span class="line">//                查询表中所以数据</span><br><span class="line">                Cursor cursor=db.query(&quot;Book&quot;,null,null,null,null,null,null);</span><br><span class="line">                if (cursor.moveToFirst()) &#123;</span><br><span class="line">                    do &#123;</span><br><span class="line">//                        遍历Cusor对象，取出数据并打印</span><br><span class="line">                        String name=cursor.getString(cursor.getColumnIndex(&quot;name&quot;));</span><br><span class="line">                        String author=cursor.getString(cursor.getColumnIndex(&quot;author&quot;));</span><br><span class="line">                        int pages=cursor.getInt(cursor.getColumnIndex(&quot;pages&quot;));</span><br><span class="line">                        double price=cursor.getDouble(cursor.getColumnIndex(&quot;price&quot;));</span><br><span class="line">                    &#125;while (cursor.moveToNext());</span><br><span class="line">                &#125;</span><br><span class="line">                cursor.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>SQlite数据类型简单，integer表示整型，real表示浮点数，text表示文本类型，blob表示二进制类型。</p>
<p>primary key将对应列设为主键，autoincrement关键字表示是自增长的。</p>
<h4 id="升级数据库"><a href="#升级数据库" class="headerlink" title="升级数据库"></a>升级数据库</h4><p>在onUpgrade()方法中执行两条DROP语句，如果发现数据库中已经存在Book或Category表就将这两张表删除，然后再调用onCreate()方法重新创建。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) &#123;</span><br><span class="line">        db.execSQL(&quot;drop table if exists Book&quot;);</span><br><span class="line">        db.execSQL(&quot;drop table if exists Category&quot;);</span><br><span class="line">        onCreate(db);</span><br></pre></td></tr></table></figure>
<p>要让onUpgrade()方法执行，SQLiteOpenHelper的构造方法里的第四个参数表示数据库版本号，之前传入的是1，现在只要改个比1大的数就可以让onUpgrade()方法执行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dbHelper=new MyDatabaseHelper(this,&quot;BookStore.db&quot;,null,2);</span><br></pre></td></tr></table></figure>
<h4 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h4><p>insert()方法接受3个参数，第一个参数是表名。第二个参数用于再未指定添加数据的情况下给某些可为空的自动列赋值null，一般用不到这个功能，直接传入null即可。第三个参数是一个ContentValues对象，它提供了一系列的put()方法重载，用于向ContentValues中添加数据，只需将表中的每个列名以及相应的待添加数据传入即可。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">                SQLiteDatabase db=db=dbHelper.getWritableDatabase();</span><br><span class="line">                ContentValues values=new ContentValues();</span><br><span class="line">//                开始组装第1条数据</span><br><span class="line">                values.put(&quot;name&quot;,&quot;The Da Vince Code&quot;);</span><br><span class="line">                values.put(&quot;author&quot;,&quot;Dan Brown&quot;);</span><br><span class="line">                values.put(&quot;pages&quot;,454);</span><br><span class="line">                values.put(&quot;price&quot;,16.96);</span><br><span class="line">                db.insert(&quot;Book&quot;,null,values);</span><br><span class="line">                values.clear();</span><br><span class="line">//                开始组装第2条数据</span><br><span class="line">                values.put(&quot;name&quot;,&quot;The Lost Symbol&quot;);</span><br><span class="line">                values.put(&quot;author&quot;,&quot;Dan Brown&quot;); </span><br><span class="line">                values.put(&quot;pages&quot;,510);</span><br><span class="line">                values.put(&quot;price&quot;,19.95);</span><br><span class="line">                db.insert(&quot;Book&quot;,null,values);</span><br></pre></td></tr></table></figure>
<h4 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h4><p>update()方法接受4个参数，第一个参数是表名，第二个参数是ContentValues对象，要把更新数据在这里组装进去。第三、四个参数用于约束更新某一行或某几行中的数据，不指定就默认更新所有行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ContentValues values1=new ContentValues();</span><br><span class="line">values1.put(&quot;price&quot;,16);</span><br><span class="line">db.update(&quot;Book&quot;,values1,&quot;name=?&quot;,new String[]&#123;&quot;The Da Vince Code&quot;&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h4><p>delete()方法接受三个参数，第一个参数是表名，第二、三个参数用于约束删除某一行或几行的数据，不指定默认删除所有行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.delete(&quot;Book&quot;,&quot;pages&gt;?&quot;,new String[]&#123;&quot;500&quot;&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h4><p>query()方法参数非常复查，最短的一个重载方法也需要传入7个参数。第一个参数是表名；第二个参数用于指定查询哪几列，如果不指定默认查询所有列；第三、四个参数用于约束查询某一行或几行的数据，不指定则默认查询所有行的数据；第五个参数用于指定需要去group by的列，不指定则表示不对查询结果进行group by操作；第六个参数用于对group by之后的数据进行进一步的过滤，不指定则不进行过滤。第七个参数用于指定查询结果的排序方式，不指定则使用默认的排序方式。</p>
<table>
<thead>
<tr>
<th>query()方法参数</th>
<th>对应SQL部分</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>table</td>
<td>from table_name</td>
<td>指定查询的表名</td>
</tr>
<tr>
<td>columns</td>
<td>select column1,column2</td>
<td>指定查询的列明</td>
</tr>
<tr>
<td>selection</td>
<td>where column=value</td>
<td>指定where的约束条件</td>
</tr>
<tr>
<td>selectionsArgs</td>
<td>-</td>
<td>为where中的占位符提供具体的值</td>
</tr>
<tr>
<td>groupBy</td>
<td>group by column</td>
<td>指定需要group by的列</td>
</tr>
<tr>
<td>having</td>
<td>having column=value</td>
<td>对group by后的进一步约束</td>
</tr>
<tr>
<td>orderBy</td>
<td>order by column1,column2</td>
<td>指定查询结果的排序方式</td>
</tr>
</tbody>
</table>
<p>调用query()方法会返回一个Cursor对象，查询到的所有数据都将从这个对象中取出。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">   Cursor cursor=db.query(&quot;Book&quot;,null,null,null,null,null,null);</span><br><span class="line">                if (cursor.moveToFirst()) &#123;</span><br><span class="line">                    do &#123;</span><br><span class="line">//                        遍历Cusor对象，取出数据并打印</span><br><span class="line">                        String name=cursor.getString(cursor.getColumnIndex(&quot;name&quot;));</span><br><span class="line">                        String author=cursor.getString(cursor.getColumnIndex(&quot;author&quot;));</span><br><span class="line">                        int pages=cursor.getInt(cursor.getColumnIndex(&quot;pages&quot;));</span><br><span class="line">                        double price=cursor.getDouble(cursor.getColumnIndex(&quot;price&quot;));        </span><br><span class="line">                    &#125;while (cursor.moveToNext());</span><br><span class="line">                &#125;</span><br><span class="line">                cursor.close();</span><br></pre></td></tr></table></figure>
<h4 id="使用SQL操作数据库"><a href="#使用SQL操作数据库" class="headerlink" title="使用SQL操作数据库"></a>使用SQL操作数据库</h4><p>虽然Android提供了非常方便的API用于操作数据库，不过总会有人更喜欢直接使用SQL来操作数据库。</p>
<ul>
<li>添加数据的方法：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db.execSQL(&quot;insert into Book(name,author,pages,price) values(?,?,?,?)&quot;,new String[]&#123;&quot;The Da Vinci Code&quot;,&quot;Dan Brown&quot;,&quot;454&quot;,&quot;16.96&quot;&#125;);</span><br><span class="line">db.execSQL(&quot;insert into Book(name,author,pages,price) values(?,?,?,?)&quot;,new String[]&#123;&quot;The Lost Symbol&quot;,&quot;Dan Brown&quot;,&quot;510&quot;,&quot;16.95&quot;&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>更新数据的方法如下：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.exexSQL(&quot;update Book set price = ? where name = ?&quot;,new String[]&#123;&quot;10.99&quot;,&quot;The Da Vinci Code&quot;&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>删除数据的方法如下：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.execSQL(&quot;delete from Book where pages &gt; ?&quot;,new String[]&#123;&quot;500&quot;&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>查询数据</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.rawQuery(&quot;select * from Book&quot;,null);</span><br></pre></td></tr></table></figure>
<p>可以看到，除了查询数据的时候调用的是SQLiteDatabase的rawQuery()方法，其他操作都是调用execSQL()方法。</p>
<h4 id="使用LitePal操作数据库"><a href="#使用LitePal操作数据库" class="headerlink" title="使用LitePal操作数据库"></a>使用LitePal操作数据库</h4><h5 id="LitePal简介"><a href="#LitePal简介" class="headerlink" title="LitePal简介"></a>LitePal简介</h5><p><a href="https://github.com/LitePalFramework/LitePal" target="_blank" rel="noopener">LitePal</a>是一款开源的Android数据库框架，采用对象关系映射(ORM)的模式，并将我们平时开发最常用到的一些数据库功能进行了封装，使得不用编写SQL语句就可以完成各种建表和增删改查得操作。</p>
<h5 id="配置LitePal"><a href="#配置LitePal" class="headerlink" title="配置LitePal"></a>配置LitePal</h5><ul>
<li>Edit your <strong>build.gradle</strong> file and add below dependency:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    compile &apos;org.litepal.android:core:1.5.1&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Configure litepal.xml</li>
</ul>
<p>在assets目录下新建一个<strong>litepal.xml</strong>文件。 编辑<strong>litepal.xml</strong>文件中得内容，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;litepal&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">    	Define the database name of your application. </span><br><span class="line">    	By default each database name should be end with .db. </span><br><span class="line">    	If you didn&apos;t name your database end with .db, </span><br><span class="line">    	LitePal would plus the suffix automatically for you.</span><br><span class="line">    	For example:    </span><br><span class="line">    	&lt;dbname value=&quot;demo&quot; /&gt;</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;dbname value=&quot;demo&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--</span><br><span class="line">    	Define the version of your database. Each time you want </span><br><span class="line">    	to upgrade your database, the version tag would helps.</span><br><span class="line">    	Modify the models you defined in the mapping tag, and just </span><br><span class="line">    	make the version value plus one, the upgrade of database</span><br><span class="line">    	will be processed automatically without concern.</span><br><span class="line">			For example:    </span><br><span class="line">    	&lt;version value=&quot;1&quot; /&gt;</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;version value=&quot;1&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--</span><br><span class="line">    	Define your models in the list with mapping tag, LitePal will</span><br><span class="line">    	create tables for each mapping class. The supported fields</span><br><span class="line">    	defined in models will be mapped into columns.</span><br><span class="line">    	For example:    </span><br><span class="line">    	&lt;list&gt;</span><br><span class="line">    		&lt;mapping class=&quot;com.test.model.Reader&quot; /&gt;</span><br><span class="line">    		&lt;mapping class=&quot;com.test.model.Magazine&quot; /&gt;</span><br><span class="line">    	&lt;/list&gt;</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;list&gt;</span><br><span class="line">    &lt;/list&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!--</span><br><span class="line">        Define where the .db file should be. &quot;internal&quot; means the .db file</span><br><span class="line">        will be stored in the database folder of internal storage which no</span><br><span class="line">        one can access. &quot;external&quot; means the .db file will be stored in the</span><br><span class="line">        path to the directory on the primary external storage device where</span><br><span class="line">        the application can place persistent files it owns which everyone</span><br><span class="line">        can access. &quot;internal&quot; will act as default.</span><br><span class="line">        For example:</span><br><span class="line">        &lt;storage value=&quot;external&quot; /&gt;</span><br><span class="line">    --&gt;</span><br><span class="line">    </span><br><span class="line">&lt;/litepal&gt;</span><br></pre></td></tr></table></figure>
<p>其中，<code>&lt;dbname&gt;</code>标签用于指定数据库名；<code>&lt;version&gt;</code>标签用于指定数据库版本号，每次更新数据库只需要增加version值；<code>&lt;list&gt;</code>标签用于指定所有得映射模型。</p>
<ul>
<li>Configure LitePalApplication</li>
</ul>
<p>You don’t want to pass the Context param all the time. To makes the APIs simple, just configure the LitePalApplication in <strong>AndroidManifest.xml</strong> as below:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;manifest&gt;</span><br><span class="line">    &lt;application</span><br><span class="line">        android:name=&quot;org.litepal.LitePalApplication&quot;</span><br><span class="line">        ...</span><br><span class="line">    &gt;</span><br><span class="line">        ...</span><br><span class="line">    &lt;/application&gt;</span><br><span class="line">&lt;/manifest&gt;</span><br></pre></td></tr></table></figure>
<p>Of course you may have your own Application and has already configured here, like:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;manifest&gt;</span><br><span class="line">    &lt;application</span><br><span class="line">        android:name=&quot;com.example.MyOwnApplication&quot;</span><br><span class="line">        ...</span><br><span class="line">    &gt;</span><br><span class="line">        ...</span><br><span class="line">    &lt;/application&gt;</span><br><span class="line">&lt;/manifest&gt;</span><br></pre></td></tr></table></figure>
<p>That’s OK. LitePal can still live with that. Just call <strong>LitePal.initialize(context)</strong> in your own Application:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class MyOwnApplication extends AnotherApplication &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onCreate() &#123;</span><br><span class="line">        super.onCreate();</span><br><span class="line">        LitePal.initialize(this);</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Make sure to call this method as early as you can. In the <strong>onCreate()</strong> method of Application will be fine. And always remember to use the application context as parameter. Do not use any instance of activity or service as parameter, or memory leaks might happen.</p>
<h5 id="Get-Started"><a href="#Get-Started" class="headerlink" title="Get Started"></a>Get Started</h5><p>After setup, you can experience the powerful function now.</p>
<h5 id="Create-tables"><a href="#Create-tables" class="headerlink" title="Create tables"></a>Create tables</h5><p>Define the models first. For example you have two models, <strong>Album</strong> and <strong>Song</strong>. The models can be defined as below:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class Album extends DataSupport &#123;</span><br><span class="line">	</span><br><span class="line">    @Column(unique = true, defaultValue = &quot;unknown&quot;)</span><br><span class="line">    private String name;</span><br><span class="line">	</span><br><span class="line">    private float price;</span><br><span class="line">	</span><br><span class="line">    private byte[] cover;</span><br><span class="line">	</span><br><span class="line">    private List&lt;Song&gt; songs = new ArrayList&lt;Song&gt;();</span><br><span class="line"></span><br><span class="line">    // generated getters and setters.</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class Song extends DataSupport &#123;</span><br><span class="line">	</span><br><span class="line">    @Column(nullable = false)</span><br><span class="line">    private String name;</span><br><span class="line">	</span><br><span class="line">    private int duration;</span><br><span class="line">	</span><br><span class="line">    @Column(ignore = true)</span><br><span class="line">    private String uselessField;</span><br><span class="line">	</span><br><span class="line">    private Album album;</span><br><span class="line"></span><br><span class="line">    // generated getters and setters.</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Then add these models into the mapping list in <strong>litepal.xml</strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;list&gt;</span><br><span class="line">    &lt;mapping class=&quot;org.litepal.litepalsample.model.Album&quot; /&gt;</span><br><span class="line">    &lt;mapping class=&quot;org.litepal.litepalsample.model.Song&quot; /&gt;</span><br><span class="line">&lt;/list&gt;</span><br></pre></td></tr></table></figure>
<p>OK! The tables will be generated next time you operate database. For example, gets the <strong>SQLiteDatabase</strong> with following codes:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SQLiteDatabase db = LitePal.getDatabase();</span><br></pre></td></tr></table></figure>
<p>Now the tables will be generated automatically with SQLs like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE album (</span><br><span class="line">	id integer primary key autoincrement,</span><br><span class="line">	name text unique default &apos;unknown&apos;,</span><br><span class="line">	price real,</span><br><span class="line">	cover blob</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE TABLE song (</span><br><span class="line">	id integer primary key autoincrement,</span><br><span class="line">	name text not null,</span><br><span class="line">	duration integer,</span><br><span class="line">	album_id integer</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h5 id="Upgrade-tables"><a href="#Upgrade-tables" class="headerlink" title="Upgrade tables"></a>Upgrade tables</h5><p>Upgrade tables in LitePal is extremely easy. Just modify your models anyway you want:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public class Album extends DataSupport &#123;</span><br><span class="line">	</span><br><span class="line">    @Column(unique = true, defaultValue = &quot;unknown&quot;)</span><br><span class="line">    private String name;</span><br><span class="line">	</span><br><span class="line">    @Column(ignore = true)</span><br><span class="line">    private float price;</span><br><span class="line">	</span><br><span class="line">    private byte[] cover;</span><br><span class="line">	</span><br><span class="line">    private Date releaseDate;</span><br><span class="line">	</span><br><span class="line">    private List&lt;Song&gt; songs = new ArrayList&lt;Song&gt;();</span><br><span class="line"></span><br><span class="line">    // generated getters and setters.</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>A <strong>releaseDate</strong> field was added and <strong>price</strong> field was annotated to ignore. Then increase the version number in <strong>litepal.xml</strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--</span><br><span class="line">    Define the version of your database. Each time you want </span><br><span class="line">    to upgrade your database, the version tag would helps.</span><br><span class="line">    Modify the models you defined in the mapping tag, and just </span><br><span class="line">    make the version value plus one, the upgrade of database</span><br><span class="line">    will be processed automatically without concern.</span><br><span class="line">    For example:    </span><br><span class="line">    &lt;version value=&quot;1&quot; &gt;&lt;/version&gt;</span><br><span class="line">--&gt;</span><br><span class="line">&lt;version value=&quot;2&quot; &gt;&lt;/version&gt;</span><br></pre></td></tr></table></figure>
<p>The tables will be upgraded next time you operate database. A <strong>releasedate</strong> column will be added into <strong>album</strong> table and the original <strong>price</strong> column will be removed. All the data in <strong>album</strong> table except those removed columns will be retained.</p>
<p>But there are some upgrading conditions that LitePal can’t handle and all data in the upgrading table will be cleaned:</p>
<ul>
<li>Add a field which annotated as <code>unique = true</code>.</li>
<li>Change a field’s annotation into <code>unique = true</code>.</li>
<li>Change a field’s annotation into <code>nullable = false</code>.</li>
</ul>
<p>Be careful of the above conditions which will cause losing data.</p>
<h5 id="Save-data"><a href="#Save-data" class="headerlink" title="Save data"></a>Save data</h5><p>The saving API is quite object oriented. Each model which inherits from <strong>DataSupport</strong> would have the <strong>save()</strong> method for free:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Album album = new Album();</span><br><span class="line">album.setName(&quot;album&quot;);</span><br><span class="line">album.setPrice(10.99f);</span><br><span class="line">album.setCover(getCoverImageBytes());</span><br><span class="line">album.save();</span><br><span class="line">Song song1 = new Song();</span><br><span class="line">song1.setName(&quot;song1&quot;);</span><br><span class="line">song1.setDuration(320);</span><br><span class="line">song1.setAlbum(album);</span><br><span class="line">song1.save();</span><br><span class="line">Song song2 = new Song();</span><br><span class="line">song2.setName(&quot;song2&quot;);</span><br><span class="line">song2.setDuration(356);</span><br><span class="line">song2.setAlbum(album);</span><br><span class="line">song2.save();</span><br></pre></td></tr></table></figure>
<p>This will insert album, song1 and song2 into database with associations.</p>
<h5 id="Update-data"><a href="#Update-data" class="headerlink" title="Update data"></a>Update data</h5><p>The simplest way, use <strong>save()</strong> method to update a record found by <strong>find()</strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Album albumToUpdate = DataSupport.find(Album.class, 1);</span><br><span class="line">albumToUpdate.setPrice(20.99f); // raise the price</span><br><span class="line">albumToUpdate.save();</span><br></pre></td></tr></table></figure>
<p>Each model which inherits from <strong>DataSupport</strong> would also have <strong>update()</strong> and <strong>updateAll()</strong> method. You can update a single record with a specified id:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Album albumToUpdate = new Album();</span><br><span class="line">albumToUpdate.setPrice(20.99f); // raise the price</span><br><span class="line">albumToUpdate.update(id);</span><br></pre></td></tr></table></figure>
<p>Or you can update multiple records with a where condition:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Album albumToUpdate = new Album();</span><br><span class="line">albumToUpdate.setPrice(20.99f); // raise the price</span><br><span class="line">albumToUpdate.updateAll(&quot;name = ?&quot;, &quot;album&quot;);</span><br></pre></td></tr></table></figure>
<h5 id="Delete-data"><a href="#Delete-data" class="headerlink" title="Delete data"></a>Delete data</h5><p>You can delete a single record using the static <strong>delete()</strong> method in <strong>DataSupport</strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DataSupport.delete(Song.class, id);</span><br></pre></td></tr></table></figure>
<p>Or delete multiple records using the static <strong>deleteAll()</strong> method in <strong>DataSupport</strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DataSupport.deleteAll(Song.class, &quot;duration &gt; ?&quot; , &quot;350&quot;);</span><br></pre></td></tr></table></figure>
<h5 id="Query-data"><a href="#Query-data" class="headerlink" title="Query data"></a>Query data</h5><p>Find a single record from song table with specified id:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Song song = DataSupport.find(Song.class, id);</span><br></pre></td></tr></table></figure>
<p>Find all records from song table:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Song&gt; allSongs = DataSupport.findAll(Song.class);</span><br></pre></td></tr></table></figure>
<p>Constructing complex query with fluent query:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Song&gt; songs = DataSupport.where(&quot;name like ?&quot;, &quot;song%&quot;).order(&quot;duration&quot;).find(Song.class);</span><br></pre></td></tr></table></figure>
<h5 id="Async-operations"><a href="#Async-operations" class="headerlink" title="Async operations"></a>Async operations</h5><p>Every database operation is on main thread by default. If your operation might spent a long time, for example saving or querying tons of records. You may want to use async operations.</p>
<p>LitePal support async operations on all crud methods. If you want to find all records from song table on a background thread, use codes like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">DataSupport.findAllAsync(Song.class).listen(new FindMultiCallback() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public &lt;T&gt; void onFinish(List&lt;T&gt; t) &#123;</span><br><span class="line">        List&lt;Song&gt; allSongs = (List&lt;Song&gt;) t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>Just use <strong>findAllAsync()</strong> instead of <strong>findAll()</strong>, and append a <strong>listen()</strong> method, the finding result will be callback to <strong>onFinish()</strong> method once it finished.</p>
<p>Abd saving asynchronously is quite the same:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Album album = new Album();</span><br><span class="line">album.setName(&quot;album&quot;);</span><br><span class="line">album.setPrice(10.99f);</span><br><span class="line">album.setCover(getCoverImageBytes());</span><br><span class="line">album.saveAsync().listen(new SaveCallback() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onFinish(boolean success) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>Just use <strong>saveAsync()</strong> instead of <strong>save()</strong>. It will save Album into database on a background, and the saving result will be callback to <strong>onFinish()</strong> method.</p>
<h5 id="Multiple-databases"><a href="#Multiple-databases" class="headerlink" title="Multiple databases"></a>Multiple databases</h5><p>If your app needs multiple databases, LitePal support it completely. You can create as many databases as you want at runtime. For example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">LitePalDB litePalDB = new LitePalDB(&quot;demo2&quot;, 1);</span><br><span class="line">litePalDB.addClassName(Singer.class.getName());</span><br><span class="line">litePalDB.addClassName(Album.class.getName());</span><br><span class="line">litePalDB.addClassName(Song.class.getName());</span><br><span class="line">LitePal.use(litePalDB);</span><br></pre></td></tr></table></figure>
<p>This will create a <strong>demo2</strong> database with <strong>singer</strong>, <strong>album</strong> and <strong>song</strong> tables.</p>
<p>If you just want to create a new database but with same configuration as <strong>litepal.xml</strong>, you can do it with:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LitePalDB litePalDB = LitePalDB.fromDefault(&quot;newdb&quot;);</span><br><span class="line">LitePal.use(litePalDB);</span><br></pre></td></tr></table></figure>
<p>You can always switch back to default database with:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LitePal.useDefault();</span><br></pre></td></tr></table></figure>
<p>And you can delete any database by specified database name:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LitePal.deleteDatabase(&quot;newdb&quot;);</span><br></pre></td></tr></table></figure>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/SQLite/" rel="tag"># SQLite</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/03/21/认识与入门MarkDown/" rel="next" title="认识与入门MarkDown">
                <i class="fa fa-chevron-left"></i> 认识与入门MarkDown
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/03/23/上传本地代码到github/" rel="prev" title="上传本地代码到github">
                上传本地代码到github <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/logo.jpg" alt="zeng">
            
              <p class="site-author-name" itemprop="name">zeng</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">56</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">15</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">38</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#创建数据库"><span class="nav-number">1.</span> <span class="nav-text">创建数据库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#升级数据库"><span class="nav-number">2.</span> <span class="nav-text">升级数据库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#添加数据"><span class="nav-number">3.</span> <span class="nav-text">添加数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#更新数据"><span class="nav-number">4.</span> <span class="nav-text">更新数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除数据"><span class="nav-number">5.</span> <span class="nav-text">删除数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查询数据"><span class="nav-number">6.</span> <span class="nav-text">查询数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用SQL操作数据库"><span class="nav-number">7.</span> <span class="nav-text">使用SQL操作数据库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用LitePal操作数据库"><span class="nav-number">8.</span> <span class="nav-text">使用LitePal操作数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#LitePal简介"><span class="nav-number">8.1.</span> <span class="nav-text">LitePal简介</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#配置LitePal"><span class="nav-number">8.2.</span> <span class="nav-text">配置LitePal</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Get-Started"><span class="nav-number">8.3.</span> <span class="nav-text">Get Started</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Create-tables"><span class="nav-number">8.4.</span> <span class="nav-text">Create tables</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Upgrade-tables"><span class="nav-number">8.5.</span> <span class="nav-text">Upgrade tables</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Save-data"><span class="nav-number">8.6.</span> <span class="nav-text">Save data</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Update-data"><span class="nav-number">8.7.</span> <span class="nav-text">Update data</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Delete-data"><span class="nav-number">8.8.</span> <span class="nav-text">Delete data</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Query-data"><span class="nav-number">8.9.</span> <span class="nav-text">Query data</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Async-operations"><span class="nav-number">8.10.</span> <span class="nav-text">Async operations</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Multiple-databases"><span class="nav-number">8.11.</span> <span class="nav-text">Multiple databases</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2016 &mdash; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zeng</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
